{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/zhuxing/Documents/react_project/xincang/src/FrontendAuth.js\";\nimport * as React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { propsModel } from './frontend-auth.model';\nexport class FrontendAuth extends React.Component {\n  render() {\n    const {\n      location,\n      config\n    } = this.props;\n    const {\n      pathname\n    } = location;\n    const isLogin = localStorage.getItem('__config_center_token'); // 如果该路由不用进行权限校验，登录状态下登陆页除外\n    // 因为登陆后，无法跳转到登陆页\n    // 这部分代码，是为了在非登陆状态下，访问不需要权限校验的路由\n\n    const targetRouterConfig = config.find(v => v.path === pathname);\n\n    if (targetRouterConfig && !targetRouterConfig.auth && !isLogin) {\n      const {\n        component\n      } = targetRouterConfig;\n      return /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: pathname,\n        component: component\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 20\n      }, this);\n    }\n\n    if (isLogin) {\n      // 如果是登陆状态，想要跳转到登陆，重定向到主页\n      if (pathname === '/homelogin') {\n        return /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 24\n        }, this);\n      } else {\n        // 如果路由合法，就跳转到相应的路由\n        if (targetRouterConfig) {\n          return /*#__PURE__*/_jsxDEV(Route, {\n            path: pathname,\n            component: targetRouterConfig.component\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 28\n          }, this);\n        } else {\n          // 如果路由不合法，重定向到 404 页面\n          return /*#__PURE__*/_jsxDEV(Redirect, {\n            to: \"/404\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 28\n          }, this);\n        }\n      }\n    } else {\n      // 非登陆状态下，当路由合法时且需要权限校验时，跳转到登陆页面，要求登陆\n      if (targetRouterConfig && targetRouterConfig.auth) {\n        return /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/homelogin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 24\n        }, this);\n      } else {\n        // 非登陆状态下，路由不合法时，重定向至 404\n        return /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/404\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 24\n        }, this);\n      }\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/zhuxing/Documents/react_project/xincang/src/FrontendAuth.js"],"names":["React","Route","Redirect","propsModel","FrontendAuth","Component","render","location","config","props","pathname","isLogin","localStorage","getItem","targetRouterConfig","find","v","path","auth","component"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,KAAT,EAAeC,QAAf,QAA+B,kBAA/B;AACA,SAASC,UAAT,QAA2B,uBAA3B;AAEA,OAAO,MAAMC,YAAN,SAA2BJ,KAAK,CAACK,SAAjC,CAA0C;AAC7CC,EAAAA,MAAM,GAAE;AACJ,UAAM;AAAEC,MAAAA,QAAF;AAAWC,MAAAA;AAAX,QAAsB,KAAKC,KAAjC;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAeH,QAArB;AACA,UAAMI,OAAO,GAAGC,YAAY,CAACC,OAAb,CAAqB,uBAArB,CAAhB,CAHI,CAKJ;AACA;AACA;;AACA,UAAMC,kBAAkB,GAAGN,MAAM,CAACO,IAAP,CAAaC,CAAD,IAAOA,CAAC,CAACC,IAAF,KAAWP,QAA9B,CAA3B;;AACA,QAAGI,kBAAkB,IAAI,CAACA,kBAAkB,CAACI,IAA1C,IAAkD,CAACP,OAAtD,EAA8D;AAC1D,YAAM;AAAEQ,QAAAA;AAAF,UAAgBL,kBAAtB;AACA,0BAAO,QAAC,KAAD;AAAO,QAAA,KAAK,MAAZ;AAAa,QAAA,IAAI,EAAEJ,QAAnB;AAA6B,QAAA,SAAS,EAAES;AAAxC;AAAA;AAAA;AAAA;AAAA,cAAP;AACH;;AAED,QAAGR,OAAH,EAAW;AACP;AACA,UAAGD,QAAQ,KAAK,YAAhB,EAA6B;AACzB,4BAAO,QAAC,QAAD;AAAU,UAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBAAP;AACH,OAFD,MAEK;AACD;AACA,YAAGI,kBAAH,EAAsB;AAClB,8BAAO,QAAC,KAAD;AAAO,YAAA,IAAI,EAAEJ,QAAb;AAAuB,YAAA,SAAS,EAAEI,kBAAkB,CAACK;AAArD;AAAA;AAAA;AAAA;AAAA,kBAAP;AACH,SAFD,MAEK;AACD;AACA,8BAAO,QAAC,QAAD;AAAU,YAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,kBAAP;AACH;AACJ;AACJ,KAbD,MAaK;AACD;AACA,UAAGL,kBAAkB,IAAIA,kBAAkB,CAACI,IAA5C,EAAiD;AAC7C,4BAAO,QAAC,QAAD;AAAU,UAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBAAP;AACH,OAFD,MAEK;AACD;AACA,4BAAO,QAAC,QAAD;AAAU,UAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBAAP;AACH;AACJ;AACJ;;AArC4C","sourcesContent":["import * as React from 'react';\nimport { Route,Redirect } from 'react-router-dom';\nimport { propsModel } from './frontend-auth.model'\n\nexport class FrontendAuth extends React.Component{\n    render(){\n        const { location,config } = this.props;\n        const { pathname } = location;\n        const isLogin = localStorage.getItem('__config_center_token')\n        \n        // 如果该路由不用进行权限校验，登录状态下登陆页除外\n        // 因为登陆后，无法跳转到登陆页\n        // 这部分代码，是为了在非登陆状态下，访问不需要权限校验的路由\n        const targetRouterConfig = config.find((v) => v.path === pathname);\n        if(targetRouterConfig && !targetRouterConfig.auth && !isLogin){\n            const { component } = targetRouterConfig;\n            return <Route exact path={pathname} component={component} />\n        }\n\n        if(isLogin){\n            // 如果是登陆状态，想要跳转到登陆，重定向到主页\n            if(pathname === '/homelogin'){\n                return <Redirect to='/' />\n            }else{\n                // 如果路由合法，就跳转到相应的路由\n                if(targetRouterConfig){\n                    return <Route path={pathname} component={targetRouterConfig.component} />\n                }else{\n                    // 如果路由不合法，重定向到 404 页面\n                    return <Redirect to='/404' />\n                }\n            }\n        }else{\n            // 非登陆状态下，当路由合法时且需要权限校验时，跳转到登陆页面，要求登陆\n            if(targetRouterConfig && targetRouterConfig.auth){\n                return <Redirect to='/homelogin' />\n            }else{\n                // 非登陆状态下，路由不合法时，重定向至 404\n                return <Redirect to='/404' />\n            }\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}