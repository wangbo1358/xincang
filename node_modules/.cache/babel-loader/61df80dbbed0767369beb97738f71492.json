{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/zhuxing/Documents/react_project/xincang/src/FrontendAuth.js\";\n\n/* import * as React from 'react';\nimport { Route,Redirect } from 'react-router-dom';\nimport { propsModel } from './frontend-auth.model'\n\nexport class FrontendAuth extends React.Component{\n    render(){\n        const { location,config } = this.props;\n        const { pathname } = location;\n        const isLogin = localStorage.getItem('__config_center_token')\n        \n        // 如果该路由不用进行权限校验，登录状态下登陆页除外\n        // 因为登陆后，无法跳转到登陆页\n        // 这部分代码，是为了在非登陆状态下，访问不需要权限校验的路由\n        const targetRouterConfig = config.find((v) => v.path === pathname);\n        if(targetRouterConfig && !targetRouterConfig.auth && !isLogin){\n            const { component } = targetRouterConfig;\n            return <Route exact path={pathname} component={component} />\n        }\n\n        if(isLogin){\n            // 如果是登陆状态，想要跳转到登陆，重定向到主页\n            if(pathname === '/homelogin'){\n                return <Redirect to='/' />\n            }else{\n                // 如果路由合法，就跳转到相应的路由\n                if(targetRouterConfig){\n                    return <Route path={pathname} component={targetRouterConfig.component} />\n                }else{\n                    // 如果路由不合法，重定向到 404 页面\n                    return <Redirect to='/404' />\n                }\n            }\n        }else{\n            // 非登陆状态下，当路由合法时且需要权限校验时，跳转到登陆页面，要求登陆\n            if(targetRouterConfig && targetRouterConfig.auth){\n                return <Redirect to='/homelogin' />\n            }else{\n                // 非登陆状态下，路由不合法时，重定向至 404\n                return <Redirect to='/404' />\n            }\n        }\n    }\n} */\nimport React, { Component } from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nclass FrontendAuth extends Component {\n  render() {\n    const {\n      routerConfig,\n      location\n    } = this.props;\n    const {\n      pathname\n    } = location;\n    const isLogin = document.cookie;\n    console.log(!isLogin);\n    console.log(pathname);\n    console.log(routerConfig); // 如果该路由不用进行权限校验，登录状态下登陆页除外\n    // 因为登陆后，无法跳转到登陆页\n    // 这部分代码，是为了在非登陆状态下，访问不需要权限校验的路由\n\n    const targetRouterConfig = routerConfig.find(item => {\n      return item.path === pathname;\n      console.log(item.path);\n    });\n\n    if (targetRouterConfig && !targetRouterConfig.auth && !isLogin) {\n      const {\n        component\n      } = targetRouterConfig;\n      return /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: pathname,\n        component: component\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (isLogin) {\n      // 如果是登陆状态，想要跳转到登陆，重定向到主页\n      if (pathname === \"/homelogin\") {\n        return /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 16\n        }, this);\n      } else {\n        // 如果路由合法，就跳转到相应的路由\n        if (targetRouterConfig) {\n          return /*#__PURE__*/_jsxDEV(Route, {\n            path: pathname,\n            component: targetRouterConfig.component\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 19\n          }, this);\n        } else {\n          // 如果路由不合法，重定向到 404 页面\n          return /*#__PURE__*/_jsxDEV(Redirect, {\n            to: \"/404\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 18\n          }, this);\n        }\n      }\n    } else {\n      // 非登陆状态下，当路由合法时且需要权限校验时，跳转到登陆页面，要求登陆\n      if (targetRouterConfig && targetRouterConfig.auth) {\n        console.log('跳转登录登录');\n        return /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/homelogin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 16\n        }, this);\n      } else {\n        // 非登陆状态下，路由不合法时，重定向至 404\n        return /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/404\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 16\n        }, this);\n      }\n    }\n  }\n\n}\n\nexport default FrontendAuth;","map":{"version":3,"sources":["/Users/zhuxing/Documents/react_project/xincang/src/FrontendAuth.js"],"names":["React","Component","Route","Redirect","FrontendAuth","render","routerConfig","location","props","pathname","isLogin","document","cookie","console","log","targetRouterConfig","find","item","path","auth","component"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,KAAT,EAAgBC,QAAhB,QAAgC,kBAAhC;;AACA,MAAMC,YAAN,SAA2BH,SAA3B,CAAqC;AACnCI,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEC,MAAAA,YAAF;AAAgBC,MAAAA;AAAhB,QAA6B,KAAKC,KAAxC;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAeF,QAArB;AACA,UAAMG,OAAO,GAAGC,QAAQ,CAACC,MAAzB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,CAACJ,OAAb;AACAG,IAAAA,OAAO,CAACC,GAAR,CAAYL,QAAZ;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAYR,YAAZ,EANO,CAOP;AACA;AACA;;AACA,UAAMS,kBAAkB,GAAGT,YAAY,CAACU,IAAb,CACxBC,IAAD,IAAU;AACR,aAAOA,IAAI,CAACC,IAAL,KAAcT,QAArB;AACAI,MAAAA,OAAO,CAACC,GAAR,CAAYG,IAAI,CAACC,IAAjB;AACD,KAJwB,CAA3B;;AAMA,QAAIH,kBAAkB,IAAI,CAACA,kBAAkB,CAACI,IAA1C,IAAkD,CAACT,OAAvD,EAAgE;AAC9D,YAAM;AAAEU,QAAAA;AAAF,UAAgBL,kBAAtB;AACA,0BAAO,QAAC,KAAD;AAAO,QAAA,KAAK,MAAZ;AAAa,QAAA,IAAI,EAAEN,QAAnB;AAA6B,QAAA,SAAS,EAAEW;AAAxC;AAAA;AAAA;AAAA;AAAA,cAAP;AACD;;AACD,QAAIV,OAAJ,EAAa;AACX;AACA,UAAID,QAAQ,KAAK,YAAjB,EAA+B;AAC7B,4BAAO,QAAC,QAAD;AAAU,UAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBAAP;AACD,OAFD,MAEO;AACL;AACA,YAAIM,kBAAJ,EAAwB;AACtB,8BAAQ,QAAC,KAAD;AAAO,YAAA,IAAI,EAAEN,QAAb;AAAuB,YAAA,SAAS,EAAEM,kBAAkB,CAACK;AAArD;AAAA;AAAA;AAAA;AAAA,kBAAR;AACD,SAFD,MAEO;AACL;AACA,8BAAO,QAAC,QAAD;AAAU,YAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,kBAAP;AACD;AACF;AACF,KAbD,MAaO;AACL;AACA,UAAIL,kBAAkB,IAAIA,kBAAkB,CAACI,IAA7C,EAAmD;AACjDN,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,4BAAO,QAAC,QAAD;AAAU,UAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBAAP;AACD,OAHD,MAGO;AACL;AACA,4BAAO,QAAC,QAAD;AAAU,UAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBAAP;AACD;AACF;AACF;;AA5CkC;;AA8CrC,eAAeV,YAAf","sourcesContent":["/* import * as React from 'react';\nimport { Route,Redirect } from 'react-router-dom';\nimport { propsModel } from './frontend-auth.model'\n\nexport class FrontendAuth extends React.Component{\n    render(){\n        const { location,config } = this.props;\n        const { pathname } = location;\n        const isLogin = localStorage.getItem('__config_center_token')\n        \n        // 如果该路由不用进行权限校验，登录状态下登陆页除外\n        // 因为登陆后，无法跳转到登陆页\n        // 这部分代码，是为了在非登陆状态下，访问不需要权限校验的路由\n        const targetRouterConfig = config.find((v) => v.path === pathname);\n        if(targetRouterConfig && !targetRouterConfig.auth && !isLogin){\n            const { component } = targetRouterConfig;\n            return <Route exact path={pathname} component={component} />\n        }\n\n        if(isLogin){\n            // 如果是登陆状态，想要跳转到登陆，重定向到主页\n            if(pathname === '/homelogin'){\n                return <Redirect to='/' />\n            }else{\n                // 如果路由合法，就跳转到相应的路由\n                if(targetRouterConfig){\n                    return <Route path={pathname} component={targetRouterConfig.component} />\n                }else{\n                    // 如果路由不合法，重定向到 404 页面\n                    return <Redirect to='/404' />\n                }\n            }\n        }else{\n            // 非登陆状态下，当路由合法时且需要权限校验时，跳转到登陆页面，要求登陆\n            if(targetRouterConfig && targetRouterConfig.auth){\n                return <Redirect to='/homelogin' />\n            }else{\n                // 非登陆状态下，路由不合法时，重定向至 404\n                return <Redirect to='/404' />\n            }\n        }\n    }\n} */\n\n\nimport React, { Component } from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nclass FrontendAuth extends Component {\n  render() {\n    const { routerConfig, location } = this.props;\n    const { pathname } = location;\n    const isLogin = document.cookie;\n    console.log(!isLogin)\n    console.log(pathname)\n    console.log(routerConfig);\n    // 如果该路由不用进行权限校验，登录状态下登陆页除外\n    // 因为登陆后，无法跳转到登陆页\n    // 这部分代码，是为了在非登陆状态下，访问不需要权限校验的路由\n    const targetRouterConfig = routerConfig.find(\n      (item) => {\n        return item.path === pathname\n        console.log(item.path)\n      }\n    );\n    if (targetRouterConfig && !targetRouterConfig.auth && !isLogin) {\n      const { component } = targetRouterConfig;\n      return <Route exact path={pathname} component={component} />\n    }\n    if (isLogin) {\n      // 如果是登陆状态，想要跳转到登陆，重定向到主页\n      if (pathname === \"/homelogin\") {\n        return <Redirect to=\"/\" />;\n      } else {\n        // 如果路由合法，就跳转到相应的路由\n        if (targetRouterConfig) {\n          return (<Route path={pathname} component={targetRouterConfig.component} />);\n        } else {\n          // 如果路由不合法，重定向到 404 页面\n          return <Redirect to=\"/404\" />;\n        }\n      }\n    } else {\n      // 非登陆状态下，当路由合法时且需要权限校验时，跳转到登陆页面，要求登陆\n      if (targetRouterConfig && targetRouterConfig.auth) {\n        console.log('跳转登录登录')\n        return <Redirect to=\"/homelogin\" />;\n      } else {\n        // 非登陆状态下，路由不合法时，重定向至 404\n        return <Redirect to=\"/404\" />;\n      }\n    }\n  }\n}\nexport default FrontendAuth"]},"metadata":{},"sourceType":"module"}